{% extends "layouts/main.html" %}

{% set smallSearch = true %}

{% block page_title %}{{ result.name }} – {{ settings.title }}{% endblock %}

{% block body_class %}organisation{% endblock %}

{% block header %}
{% endblock %}

{% block content %}
<div class="banner">
  <div class="row">
    <div class="columns small-12 large-12">
      <h1>{{ result.name }}</h1>
      <p class="banner-buttons">
        <span>Based in {{ result.registrationCountry }}</span>
        {% if result.payload.organisationUrls[0] %}
        <span><a href="{{ result.payload.organisationUrls[0] }}" target="_blank">Website</a></span>
        {% endif %}
        {% if result.payload.privacyNoticeUrl.url %}
        <span><a href="{{ result.payload.privacyNoticeUrl.url }}" target="_blank">Privacy notice</a></span>
        {% endif %}
        <span><a href="https://opencorporates.com/companies/{{ result.registrationCountry }}/{{ result.registrationNumber }}" target="_blank">View on OpenCorporates</a></span>
      </p>
    </div>
  </div>
</div>

<div id="summary" class="summary">
  <div class="row">
    <div class="columns small-12 large-12">
      <h2>Summary</h2>
      <ul>
        {% for item in meta.overviewMatrix %}
          {% if item != false %}
          <li>
            <span>{{ item.message | safe }}</span>
          </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<div id="dataProtectionOfficer" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Data Protection Officer</h2>
    <p>Organisations that use special categories of data, are public bodies, or do large scale processing must appoint a <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/accountability-and-governance/data-protection-officers/" target="_blank">Data Protection Officer</a>.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.dataProtectionOfficer %}
      {% if result.payload.dataProtectionOfficer.name %}
        <h3>Name</h3>
        <p>{{ result.payload.dataProtectionOfficer.name }}</p>
      {% endif %}
      {% if result.payload.dataProtectionOfficer.role %}
        <h3>Role</h3>
        <p>{{ result.payload.dataProtectionOfficer.role }}</p>
      {% endif %}
      {% set contactInfo = result.payload.dataProtectionOfficer.contactInfo %}
      {% include 'partials/_contact_info.html' %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="dataProtectionRegister" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Data protection register</h2>
    <p>Some countries maintain a public register of organisations that process data.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.dataProtectionRegister %}
      {% if result.payload.dataProtectionRegister.identifier %}
        <h3>Identifier</h3>
        <p>{{ result.payload.dataProtectionRegister.identifier }}</p>
      {% endif %}

      {% if result.payload.dataProtectionRegister.url %}
        <h3>URL</h3>
        <p>
          <a href="{{ result.payload.dataProtectionRegister.url }}" target="_blank">{{ result.payload.dataProtectionRegister.url }}</a>
        </p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="internationalTransfer" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>International transfer</h2>
    <p>Personal data <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/international-transfers/" target="_blank">must be protected</a> by adequate safeguards when transferred outside the European Economic Area (EEA).</p>
    <p>Some US-based organisations do this by self-certifying with the <a href="https://www.privacyshield.gov/welcome" target="_blank">Privacy Shield Framework</a>.</p>
    <p>Others use data processing addendums that add <a href="https://ec.europa.eu/info/law/law-topic/data-protection/data-transfers-outside-eu/model-contracts-transfer-personal-data-third-countries_en" target="_blank">adequate protections</a> to existing contracts.</p>
    <p>The data protection laws of some non-EEA countries has been <a href="https://ec.europa.eu/info/law/law-topic/data-protection/data-transfers-outside-eu/adequacy-protection-personal-data-non-eu-countries_en" target="_blank">judged as adequate</a> by the European Commission.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.internationalTransfer %}
      {% if result.payload.internationalTransfer.privacyShieldUrl %}
      <h3>US–EU Privacy Shield Framework</h3>
      <p>This organisation is self-certified</p>
      <p>
        <a href="#">{{ result.payload.internationalTransfer.privacyShieldUrl }}</a>
      </p>
      {% endif %}

      {% if result.payload.internationalTransfer.dataProcessingAddendum %}
        <h3>Data processing addendum</h3>
        {% set addendumType = result.payload.internationalTransfer.dataProcessingAddendum.type %}
        {% if addendumType == "form" %}
          <p>This organisation requires a form to be returned to enter tint a data processing addendum</p>
        {% elif addendumType == "setting" %}
          <p>This organisation requires a setting to be changed to enter into a data processing addendum</p>
        {% elif addendumType == "assumed" %}
          <p>This organisation provides adequate protection through its Terms of Service</p>
        {% elif addendumType == "none" %}
          <p>This organisation doesn’t offer a data processing addendum</p>
        {% endif %}

        {% if result.payload.internationalTransfer.dataProcessingAddendum.url %}
          <a href="{{ result.payload.internationalTransfer.dataProcessingAddendum.url }}" target="_blank" style="margin-top: 1.2rem;">{{ result.payload.internationalTransfer.dataProcessingAddendum.url }}</a>
        {% endif %}
      {% endif %}

      {% if result.payload.internationalTransfer.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.internationalTransfer.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="thirdParties" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Third parties</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">must give details</a> about other parties that personal data is shared with.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.thirdParties %}
      {% if result.payload.thirdParties.list %}
        <h3>From privacy notice</h3>
        <ul>
          {% for item in result.payload.thirdParties.list %}
          <li><p>{{ item }}</p></li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if result.payload.thirdParties.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.thirdParties.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="retentionRules" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Retention rules</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">must give details</a> about how long data is kept.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.retentionRules.notes %}
      <h3>From privacy notice</h3>
      <p>{{ result.payload.retentionRules.notes | striptags(true) | escape | nl2br }}</p>
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="dataCategoriesCollected" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Data categories collected</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">must give details</a> about what categories of data are stored and processed.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.dataTypesCollected %}
      {% if result.payload.dataTypesCollected.list %}
      <h3>From privacy notice</h3>
      <ul>
        {% for item in result.payload.dataTypesCollected.list %}
        {% set flag = item | highlightSpecialCategory %}
        <li><p>{{ item | replace("_", " ") | capitalize }}{% if flag == "true" %}<span> ⚠️</span>{% endif %}</p></li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if result.payload.dataTypesCollected.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.dataTypesCollected.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="automatedDecisionMaking" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Automated decision making</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">must give details</a> about how data is used to make decisions without human involvement.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.automatedDecisionMaking %}
      {% if result.payload.automatedDecisionMaking.usesAutomatedDecisionMaking %}
        <p class="bold">This organisation uses automated decision making</p>
      {% else %}
        <p class="bold">This organisation does not use automated decision making</p>
      {% endif %}

      {% if result.payload.automatedDecisionMaking.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.automatedDecisionMaking.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="complaintInformation" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Complaint information</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">must give details</a> about how to make a complaint with a data protection authority.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.complaintInformation %}
      {% if result.payload.complaintInformation.present %}
        <p class="bold">This organisation gives details about making a complaint in their privacy policy</p>
      {% else %}
        <p class="bold">This organisation does not give details about making a complaint in their privacy policy</p>
      {% endif %}

      {% if result.payload.complaintInformation.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.complaintInformation.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="securityStandards" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Security standards</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/security/"target="_blank">must ensure</a> that data is stored and processed securely.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.securityStandards %}
      {% set specificity = result.payload.securityStandards.specificity %}

      {% if specificity %}
        {% if specificity == "specific" %}
          <p class="bold">This organisation provides a specific description of how they secure data</p>
        {% elif specificity == "general" %}
          <p class="bold">This organisation provides a general description of how they secure data</p>
        {% elif specificity == "none" %}
          <p class="bold">This organisation does not mention how they secure data</p>
        {% endif %}
      {% endif %}

      {% if result.payload.securityStandards.url %}
        <h3>Security standards URL</h3>
        <p>
          <a href="{{ result.payload.securityStandards.url }}" target="_blank">{{ result.payload.securityStandards.url }}</a>
        </p>
      {% endif %}

      {% if result.payload.securityStandards.notes %}
        <h3>Notes</h3>
        <p>{{ result.payload.securityStandards.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="lawfulBases" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Lawful bases</h2>
    <p>Organisations <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/lawful-basis-for-processing/" target="_blank">must justify collection and use of data</a> under six lawful bases and provide information about their decisions</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% set lawfulBases = result.payload.lawfulBases %}

    {% if lawfulBases %}
      {% if lawfulBases.consent %}
        <h3>Consent</h3>
        <p>{{ lawfulBases.consent | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.contract %}
        <h3>Contract</h3>
        <p>{{ lawfulBases.contract | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.legalObligation %}
        <h3>Legal obligation</h3>
        <p>{{ lawfulBases.legalObligation | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.vitalInterests %}
        <h3>Vital interests</h3>
        <p>{{ lawfulBases.vitalInterests | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.publicTask %}
        <h3>Public task</h3>
        <p>{{ lawfulBases.publicTask | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.legitimateInterests %}
        <h3>Legitimate interests</h3>
        <p>{{ lawfulBases.legitimateInterests | striptags(true) | escape | nl2br }}</p>
      {% endif %}

      {% if lawfulBases.notes %}
        <h3>Notes</h3>
        <p>{{ lawfulBases.notes | striptags(true) | escape | nl2br }}</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="individualRights" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Individual rights</h2>
    <p>Organisations must provide information about the <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/" target="_blank">new individual rights</a> under GDPR.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% set rights = result.payload.rights %}

    {% if rights %}
      {% if rights.general %}
        {% set contactInfo = rights.general.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.general.notes %}
          <h3>Notes</h3>
          <p>{{ rights.general.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      {% endif %}

      {% if rights.access or rights.rectification or rights.erasure or rights.restrictProcessing or rights.dataPortability or rights.object or rights.automatedDecisionMaking %}
      <h3>Specific rights</h3>
      {% endif %}

      <p>
      {% if rights.access %}
        <a href="#" class="rights-selector">Access</a>
      {% endif %}
      {% if rights.rectification %}
        <a href="#" class="rights-selector">Rectification</a>
      {% endif %}
      {% if rights.erasure %}
        <a href="#" class="rights-selector">Erasure</a>
      {% endif %}
      {% if rights.restrictProcessing %}
        <a href="#" class="rights-selector">Restrict processing</a>
      {% endif %}
      {% if rights.dataPortability %}
        <a href="#" class="rights-selector">Data portability</a>
      {% endif %}
      {% if rights.object %}
        <a href="#" class="rights-selector">Object</a>
      {% endif %}
      {% if rights.automatedDecisionMaking %}
        <a href="#" class="rights-selector">Automated decision making</a>
      {% endif %}
      </p>

      {% if rights.access %}
      <div class="single-right" id="single-right-access">
        {% set contactInfo = rights.access.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.access.notes %}
          <h3>Notes</h3>
          <p>{{ rights.access.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.rectification %}
      <div class="single-right" id="single-right-rectification">
        {% set contactInfo = rights.rectification.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.rectification.notes %}
          <h3>Notes</h3>
          <p>{{ rights.rectification.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.erasure %}
      <div class="single-right" id="single-right-erasure">
        {% set contactInfo = rights.erasure.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.erasure.notes %}
          <h3>Notes</h3>
          <p>{{ rights.erasure.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.restrictProcessing %}
      <div class="single-right" id="single-right-restrict-processing">
        {% set contactInfo = rights.restrictProcessing.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.restrictProcessing.notes %}
          <h3>Notes</h3>
          <p>{{ rights.restrictProcessing.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.dataPortability %}
      <div class="single-right" id="single-right-data-portability">
        {% set contactInfo = rights.dataPortability.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.dataPortability.notes %}
        <h3>Notes</h3>
        <p>{{ rights.dataPortability.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.object %}
      <div class="single-right" id="single-right-object">
        {% set contactInfo = rights.object.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.object.notes %}
        <h3>Notes</h3>
        <p>{{ rights.object.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}

      {% if rights.automatedDecisionMaking %}
      <div class="single-right" id="single-right-automated-decision-making">
        {% set contactInfo = rights.automatedDecisionMaking.contactInfo %}
        {% include 'partials/_contact_info.html' %}

        {% if rights.automatedDecisionMaking.notes %}
          <h3>Notes</h3>
          <p>{{ rights.automatedDecisionMaking.notes | striptags(true) | escape | nl2br }}</p>
        {% endif %}
      </div>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="unusualProcessingPurposes" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Unusual processing purposes</h2>
    <p>Organisations must provide information about <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/" target="_blank">what they do</a> with data. This section highlights less common uses of data.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% if result.payload.unusualProcessingPurposes %}
      <h3>Notes</h3>
      <p>{{ result.payload.unusualProcessingPurposes.notes | striptags(true) | escape | nl2br }}</p>
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

<div id="transparencyRecommendations" class="row data-row">
  <div class="columns small-12 large-6 description">
    <h2>Transparency recommendations</h2>
    <p>Organisations are required to provide privacy information <a href="https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/individual-rights/right-to-be-informed/" target="_blank">in a transparent way</a>. The Article 29 Working Party <a href="http://ec.europa.eu/newsroom/article29/item-detail.cfm?item_id=622227" target="_blank">has provided recommendations</a> on how to do this.</p>
  </div>
  <div class="columns small-12 large-6 data">
    {% set points = result.payload.transparencyRecommendations %}

    {% if points %}
      <h3>Criteria</h3>

      {% if points.plainLanguage %}
        <p>✅ Plain language</p>
      {% else %}
        <p>❌ Plain language</p>
      {% endif %}

      {% if points.definiteLanguage %}
        <p>✅ Definite language</p>
      {% else %}
        <p>❌ Definite language</p>
      {% endif %}

      {% if points.easyToFind %}
        <p>✅ Easy to find</p>
      {% else %}
        <p>❌ Easy to find</p>
      {% endif %}

      {% if points.legibleDesign %}
        <p>✅ Legible design</p>
      {% else %}
        <p>❌ Legible design</p>
      {% endif %}
    {% else %}
      {% include 'partials/_section_missing.html' %}
    {% endif %}
  </div>
</div>

{% if extraData %}
<div id="transparencyRecommendations" class="row extra-data-table">
  <div class="columns small-12 large-12">
    {{ extraData | safe }}
  </div>
</div>
{% endif %}

<div id="actions" class="row">
  <div class="columns large-12 small-12">
    <p>Last updated {{ meta.friendlyDate }} at {{ meta.friendlyTime }} &bull; <a href="/organisation/{{ result.registrationCountry }}/{{ result.registrationNumber }}.json" target="_blank">Download as JSON</a> &bull; <a href="https://github.com/projectsbyif/odr-test/blob/master/{{ result.registrationCountry }}{{ result.registrationNumber }}.json">View on GitHub</a></p>
  </div>
</div>
{% endblock %}
